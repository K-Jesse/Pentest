# H4

a) Totally Legit Sertificate. Asenna OWASP ZAP, generoi CA-sertifikaatti ja asenna se selaimeesi. Laita ZAP proxyksi selaimeesi. Osoita, että hakupyynnöt ilmestyvät ZAP:n käyttöliittymään. (Ei toimi localhost:lla ilman Foxyproxya)

Katsoin tähän tehtävään apua aikaisemman kurssin suorittaneelta Halosen raportista mikä löytyy [täältä](https://github.com/therealhalonen/penetration_testing/blob/master/h2/report.md) . Aloitetaan lataamalla cross platform package [täältä](https://www.zaproxy.org/download/). Tämän jälkeen siirsi unzippasin kansion ja navigoin kansioon, missä ajoin ```./zap.sh```

![image](imgs/zap.png)


Nyt zap toimii joten lähdetään asentelemaan certtejä. Käynnistän Firefoxin zapin rinnalle. Navigoin seuraavaksi tools -> options ja sieltä local server/proixies mistä muutan proxyn portin arvoksi 8888.

![image](imgs/certti.png)

Seuraavaksi mennään kohtaan server certificates generoimaan ja tallentamaan certti. Sitten avataan firefox mennään settings ja kirjoitetaan hakukenttän certificate. Valitaan view certificates ja importataan juuri generoimamme certti. Lopuksie vielä luotetaan tähän certtiin. 

![image](imgs/certtiimp.png)

## b) Kettumaista. Asenna FoxyProxy Standard Firefox Addon, ja lisää ZAP proxyksi siihen.

Jäin tämän jälkeen hieman jumiin, mutta huomasin myöhemmin teron vinkeistä toisen kotitehtävä raportin Kulonpäältä mikä löytyy [täältä](https://kulonpaa.com/?p=338). Noudatin sitä foxyproxyn asentamiseen. Avasin firefoxin ja oikeasta ylänurkastä löytyy palapelin palan kuva mistä voi hakea lisäosia. Sieltä laitoin hakukenttään foxyproxy ja asensin standard version. 

Menään foxyproxyn asetuksiin ja lisätään uusi määritys.

![image](imgs/foxy.png)

Tämän jälkeen menin selaimessa metasploitable 2:n osoitteeseen  ja kuinka ollakkaan zap huomasi GET pyynnöt ja metasploitablen sivulla minua moikkasi ZAP HUD. Tämä viitaa ilmeisesti siihen, että hommat toimii ainakin jotenkin. 

![image](imgs/zipedizap.png)

## Lähteet

Karvinen 2023: Ethical Hacking 2023 https://terokarvinen.com/2023/eettinen-hakkerointi-2023/
